(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{1721:(e,r,t)=>{Promise.resolve().then(t.bind(t,1652))},1652:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var o=t(5155);t(2115);var a=t(3034);function i(){return(0,o.jsx)(a.A,{})}},3034:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var o=t(5155),a=t(2115),i=t(5370),s=t(1536),n=t(5565);function l(){let[,e]=(0,a.useState)(null),[r,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(new Set),[l,p]=(0,a.useState)(""),[m,u]=(0,a.useState)({}),g=(0,a.useCallback)(e=>s.has(e),[s]);(0,a.useEffect)(()=>{(async()=>{try{var r;let o=await fetch("/api/profile",{credentials:"include"});if(!o.ok)throw Error("Failed to fetch user profile.");let a=await o.json();e(a.user);let s=(await (0,i.pl)()).data.groups;if(t(s),null===(r=a.user)||void 0===r?void 0:r.email){let e=s.filter(e=>e.members.some(e=>e.email===a.user.email)).map(e=>e.id);n(new Set(e))}}catch(e){console.error("Error fetching data:",e),e instanceof Error?p(e.message||"Failed to fetch data."):p("Failed to fetch data.")}})()},[]);let h=(0,a.useCallback)(async e=>{try{await (0,i.U7)(e),n(r=>new Set(r).add(e))}catch(e){console.error("Error joining group:",e),p("Failed to join the group. Please try again later.")}},[]),x=(0,a.useCallback)(e=>{u(r=>({...r,[e]:"https://via.placeholder.com/40"}))},[]);return l?(0,o.jsx)("div",{style:c.errorMsg,children:(0,o.jsxs)("p",{children:["Error: ",l]})}):(0,o.jsx)("div",{style:c.container,children:(0,o.jsx)("div",{style:c.grid,children:r.map(e=>(0,o.jsx)(d,{group:e,isJoined:g,handleJoin:h,handleImageError:x,avatarSrcs:m},e.id))})})}let d=(0,a.memo)(function(e){let{group:r,isJoined:t,handleJoin:a,handleImageError:i,avatarSrcs:l}=e;return(0,o.jsxs)("div",{style:c.card,children:[(0,o.jsxs)("div",{style:c.cardHeader,children:[(0,o.jsx)("h3",{style:c.cardTitle,children:r.name}),(0,o.jsxs)("div",{style:c.memberCount,children:[(0,o.jsx)(s.YXz,{style:{marginRight:"5px"}}),r.members.length," ",1===r.members.length?"Member":"Members"]})]}),(0,o.jsxs)("div",{style:c.avatars,children:[r.members.slice(0,5).map((e,t)=>(0,o.jsx)(n.default,{src:l[r.id]||e.user_image||"https://via.placeholder.com/40",alt:"".concat(e.name,"'s avatar"),width:40,height:40,style:c.avatar,onError:()=>i(r.id)},t)),r.members.length>5&&(0,o.jsxs)("span",{style:c.moreMembers,children:["+",r.members.length-5]})]}),(0,o.jsx)("p",{style:c.description,children:r.description}),t(r.id)?(0,o.jsx)("button",{style:{...c.joinButton,...c.joinedButton},disabled:!0,children:"Joined"}):(0,o.jsx)("button",{style:c.joinButton,onClick:()=>a(r.id),children:"Join"})]})}),c={container:{padding:"40px 20px",maxWidth:"1200px",margin:"auto",fontFamily:"'Roboto', sans-serif"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px"},card:{backgroundColor:"#CCCCFF",borderRadius:"15px",padding:"25px",boxShadow:"0 10px 20px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"transform 0.3s, box-shadow 0.3s"},cardHeader:{marginBottom:"15px"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",color:"#4B4B4B",margin:"0 0 10px 0"},memberCount:{display:"flex",alignItems:"center",fontSize:"0.9rem",color:"#777"},avatars:{display:"flex",alignItems:"center",marginBottom:"15px",position:"relative"},avatar:{borderRadius:"50%",objectFit:"cover",marginRight:"-10px",border:"2px solid #fff",boxShadow:"0 0 0 1px rgba(0,0,0,0.1)",cursor:"pointer",transition:"transform 0.3s, box-shadow 0.3s"},moreMembers:{fontSize:"0.9rem",color:"#555",marginLeft:"10px"},description:{fontSize:"1rem",color:"#555",marginBottom:"20px",flexGrow:1},joinButton:{padding:"10px 20px",backgroundColor:"#6A5ACD",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem",transition:"background-color 0.3s, transform 0.3s"},joinedButton:{backgroundColor:"#32CD32",cursor:"not-allowed"},errorMsg:{color:"red",textAlign:"center",marginTop:"50px",fontSize:"1.2rem"}}},5370:(e,r,t)=>{"use strict";t.d(r,{Kr:()=>n,QY:()=>d,U7:()=>s,eO:()=>a,kK:()=>l,pl:()=>i});let o=t(2651).A.create({baseURL:"http://127.0.0.1:5000/api",withCredentials:!0}),a=()=>o.get("/profile"),i=()=>o.get("/groups/discover"),s=e=>o.post("/groups/".concat(e,"/join")),n=e=>o.post("/groups/".concat(e,"/complete")),l=e=>o.get("/groups/".concat(e,"/leaderboard")),d=e=>o.get("/groups/".concat(e,"/activity"))}},e=>{var r=r=>e(e.s=r);e.O(0,[711,651,303,441,517,358],()=>r(1721)),_N_E=e.O()}]);