(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{8040:(e,t,o)=>{Promise.resolve().then(o.bind(o,2949))},2949:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a});var i=o(5155);o(2115);var r=o(3034);function a(){return(0,i.jsxs)("div",{style:n.pageContainer,children:[(0,i.jsxs)("div",{style:n.header,children:[(0,i.jsx)("button",{style:n.backButton,onClick:()=>history.back(),"aria-label":"Go Back",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"#7C83FD",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:n.backIcon,children:(0,i.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,i.jsx)("h1",{style:n.heading,children:"Discover accountability groups"})]}),(0,i.jsx)(r.A,{})]})}let n={pageContainer:{padding:"10px",backgroundColor:"#2E2B3C",minHeight:"100vh",fontFamily:"'Roboto', sans-serif",color:"#fff"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},backButton:{display:"flex",alignItems:"center",background:"none",border:"none",cursor:"pointer",padding:"10px 15px",fontSize:"16px",fontWeight:"bold",color:"#7C83FD",textDecoration:"none",transition:"transform 0.2s, color 0.2s"},backIcon:{marginRight:"0px",transition:"stroke 0.2s"},heading:{fontSize:"32px",fontWeight:"bold",color:"#D4D4F5",flexGrow:1,textAlign:"center"}}},3034:(e,t,o)=>{"use strict";o.d(t,{A:()=>d});var i=o(5155),r=o(8803),a=o.n(r),n=o(2115),s=o(5370),l=o(1536);function d(){let[,e]=(0,n.useState)(null),[t,o]=(0,n.useState)([]),[r,l]=(0,n.useState)(new Set),[d,m]=(0,n.useState)(""),[g,h]=(0,n.useState)({}),[u,b]=(0,n.useState)(!0),y=(0,n.useCallback)(e=>r.has(e),[r]);(0,n.useEffect)(()=>{(async()=>{try{var t;b(!0);let i=await fetch("/api/profile",{credentials:"include"});if(!i.ok)throw Error("Failed to fetch user profile.");let r=await i.json();e(r.user);let a=(await (0,s.pl)()).data.groups;if(o(a),null===(t=r.user)||void 0===t?void 0:t.email){let e=a.filter(e=>e.members.some(e=>e.email===r.user.email)).map(e=>e.id);l(new Set(e))}b(!1)}catch(e){console.error("Error fetching data:",e),e instanceof Error?m(e.message||"Failed to fetch data."):m("Failed to fetch data."),b(!1)}})()},[]);let f=(0,n.useCallback)(async e=>{try{await (0,s.U7)(e),l(t=>new Set(t).add(e))}catch(e){console.error("Error joining group:",e),m("Failed to join the group. Please try again later.")}},[]),k=(0,n.useCallback)(e=>{h(t=>({...t,[e]:"https://via.placeholder.com/40"}))},[]);return d?(0,i.jsx)("div",{style:x.errorMsg,children:(0,i.jsxs)("p",{children:["Error: ",d]})}):u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a(),{id:"59757a9a75657e2a",children:"@-webkit-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-moz-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-o-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}"}),(0,i.jsxs)("div",{style:x.container,className:"jsx-59757a9a75657e2a",children:[(0,i.jsx)("div",{style:x.loadingText,className:"jsx-59757a9a75657e2a",children:"Loading..."}),(0,i.jsx)("div",{style:x.grid,className:"jsx-59757a9a75657e2a",children:[...Array(6)].map((e,t)=>(0,i.jsx)(p,{},t))})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a(),{id:"11a770e3a6c80e13",children:"@-webkit-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-moz-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-o-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}"}),(0,i.jsx)("div",{style:x.container,className:"jsx-11a770e3a6c80e13",children:(0,i.jsx)("div",{style:x.grid,className:"jsx-11a770e3a6c80e13",children:t.map(e=>(0,i.jsx)(c,{group:e,isJoined:y,handleJoin:f,handleImageError:k,avatarSrcs:g},e.id))})})]})}let c=(0,n.memo)(function(e){let{group:t,isJoined:o,handleJoin:r,handleImageError:a,avatarSrcs:n}=e;return(0,i.jsxs)("div",{style:x.card,children:[(0,i.jsxs)("div",{style:x.cardHeader,children:[(0,i.jsx)("h3",{style:x.cardTitle,children:t.name}),(0,i.jsxs)("div",{style:x.memberCount,children:[(0,i.jsx)(l.YXz,{style:{marginRight:"5px"}}),t.members.length," ",1===t.members.length?"Member":"Members"]})]}),(0,i.jsxs)("div",{style:x.avatars,children:[t.members.slice(0,5).map((e,o)=>(0,i.jsx)("img",{src:n[t.id]||e.user_image||"https://via.placeholder.com/40",alt:"".concat(e.name,"'s avatar"),width:40,height:40,style:x.avatar,onError:()=>a(t.id)},o)),t.members.length>5&&(0,i.jsxs)("span",{style:x.moreMembers,children:["+",t.members.length-5]})]}),(0,i.jsx)("p",{style:x.description,children:t.description}),o(t.id)?(0,i.jsx)("button",{style:{...x.joinButton,...x.joinedButton},disabled:!0,children:"Joined"}):(0,i.jsx)("button",{style:x.joinButton,onClick:()=>r(t.id),children:"Join"})]})});function p(){return(0,i.jsxs)("div",{style:x.skeletonCard,children:[(0,i.jsxs)("div",{style:x.skeletonHeader,children:[(0,i.jsx)("div",{style:x.skeletonTitle}),(0,i.jsx)("div",{style:x.skeletonSubtitle})]}),(0,i.jsxs)("div",{style:x.skeletonAvatars,children:[(0,i.jsx)("div",{style:x.skeletonAvatar}),(0,i.jsx)("div",{style:x.skeletonAvatar}),(0,i.jsx)("div",{style:x.skeletonAvatar})]}),(0,i.jsx)("div",{style:x.skeletonDescription}),(0,i.jsx)("div",{style:x.skeletonButton})]})}let x={container:{padding:"40px 20px",maxWidth:"1200px",margin:"auto",fontFamily:"'Roboto', sans-serif"},loadingText:{textAlign:"center",marginBottom:"1rem",fontSize:"1.2rem",fontStyle:"italic",color:"#444"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px"},card:{backgroundColor:"#CCCCFF",borderRadius:"15px",padding:"25px",boxShadow:"0 10px 20px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"transform 0.3s, box-shadow 0.3s",minHeight:"200px"},cardHeader:{marginBottom:"15px"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",color:"#4B4B4B",margin:"0 0 10px 0"},memberCount:{display:"flex",alignItems:"center",fontSize:"0.9rem",color:"#777"},avatars:{display:"flex",alignItems:"center",marginBottom:"15px",position:"relative"},avatar:{borderRadius:"50%",objectFit:"cover",marginRight:"-10px",border:"2px solid #fff",boxShadow:"0 0 0 1px rgba(0,0,0,0.1)",cursor:"pointer",transition:"transform 0.3s, box-shadow 0.3s"},moreMembers:{fontSize:"0.9rem",color:"#555",marginLeft:"10px"},description:{fontSize:"1rem",color:"#555",marginBottom:"20px",flexGrow:1},joinButton:{padding:"10px 20px",backgroundColor:"#6A5ACD",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem",transition:"background-color 0.3s, transform 0.3s"},joinedButton:{backgroundColor:"#32CD32",cursor:"not-allowed"},errorMsg:{color:"red",textAlign:"center",marginTop:"50px",fontSize:"1.2rem"},skeletonCard:{backgroundColor:"#eee",overflow:"hidden",position:"relative",animation:"blink 1s ease-in-out infinite",borderRadius:"15px",padding:"25px",minHeight:"200px",boxShadow:"0 10px 20px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",justifyContent:"space-between"},skeletonHeader:{marginBottom:"15px"},skeletonTitle:{width:"60%",height:"20px",backgroundColor:"#ddd",borderRadius:"4px",marginBottom:"10px"},skeletonSubtitle:{width:"40%",height:"15px",backgroundColor:"#ddd",borderRadius:"4px"},skeletonAvatars:{display:"flex",marginBottom:"15px"},skeletonAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#ddd",marginRight:"-10px",border:"2px solid #fff"},skeletonDescription:{width:"100%",height:"40px",backgroundColor:"#ddd",borderRadius:"4px",marginBottom:"20px",flexGrow:1},skeletonButton:{width:"30%",height:"35px",backgroundColor:"#ddd",borderRadius:"8px"}}},5370:(e,t,o)=>{"use strict";o.d(t,{Kr:()=>s,QY:()=>d,U7:()=>n,eO:()=>r,kK:()=>l,pl:()=>a,rl:()=>c});let i=o(2651).A.create({baseURL:"http://127.0.0.1:5000/api",withCredentials:!0}),r=()=>i.get("/profile"),a=()=>i.get("/groups/discover"),n=e=>i.post("/groups/".concat(e,"/join")),s=e=>i.post("/groups/".concat(e,"/complete")),l=e=>i.get("/groups/".concat(e,"/leaderboard")),d=e=>i.get("/groups/".concat(e,"/activity")),c=e=>i.get("/groups/".concat(e,"/check-habit"))}},e=>{var t=t=>e(e.s=t);e.O(0,[711,651,69,441,517,358],()=>t(8040)),_N_E=e.O()}]);