(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{8040:(e,t,r)=>{Promise.resolve().then(r.bind(r,2949))},2949:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var o=r(5155);r(2115);var i=r(3034);function n(){return(0,o.jsxs)("div",{style:a.pageContainer,children:[(0,o.jsxs)("div",{style:a.header,children:[(0,o.jsx)("button",{style:a.backButton,onClick:()=>history.back(),"aria-label":"Go Back",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"#7C83FD",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:a.backIcon,children:(0,o.jsx)("polyline",{points:"15 18 9 12 15 6"})})}),(0,o.jsx)("h1",{style:a.heading,children:"Discover accountability groups"})]}),(0,o.jsx)(i.A,{})]})}let a={pageContainer:{padding:"10px",backgroundColor:"#2E2B3C",minHeight:"100vh",fontFamily:"'Roboto', sans-serif",color:"#fff"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"20px"},backButton:{display:"flex",alignItems:"center",background:"none",border:"none",cursor:"pointer",padding:"10px 15px",fontSize:"16px",fontWeight:"bold",color:"#7C83FD",textDecoration:"none",transition:"transform 0.2s, color 0.2s"},backIcon:{marginRight:"0px",transition:"stroke 0.2s"},heading:{fontSize:"32px",fontWeight:"bold",color:"#D4D4F5",flexGrow:1,textAlign:"center"}}},3034:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(5155),i=r(2115),n=r(5370),a=r(1536),s=r(5565);function l(){let[,e]=(0,i.useState)(null),[t,r]=(0,i.useState)([]),[a,s]=(0,i.useState)(new Set),[l,p]=(0,i.useState)(""),[m,g]=(0,i.useState)({}),u=(0,i.useCallback)(e=>a.has(e),[a]);(0,i.useEffect)(()=>{(async()=>{try{var t;let o=await fetch("/api/profile",{credentials:"include"});if(!o.ok)throw Error("Failed to fetch user profile.");let i=await o.json();e(i.user);let a=(await (0,n.pl)()).data.groups;if(r(a),null===(t=i.user)||void 0===t?void 0:t.email){let e=a.filter(e=>e.members.some(e=>e.email===i.user.email)).map(e=>e.id);s(new Set(e))}}catch(e){console.error("Error fetching data:",e),e instanceof Error?p(e.message||"Failed to fetch data."):p("Failed to fetch data.")}})()},[]);let h=(0,i.useCallback)(async e=>{try{await (0,n.U7)(e),s(t=>new Set(t).add(e))}catch(e){console.error("Error joining group:",e),p("Failed to join the group. Please try again later.")}},[]),x=(0,i.useCallback)(e=>{g(t=>({...t,[e]:"https://via.placeholder.com/40"}))},[]);return l?(0,o.jsx)("div",{style:c.errorMsg,children:(0,o.jsxs)("p",{children:["Error: ",l]})}):(0,o.jsx)("div",{style:c.container,children:(0,o.jsx)("div",{style:c.grid,children:t.map(e=>(0,o.jsx)(d,{group:e,isJoined:u,handleJoin:h,handleImageError:x,avatarSrcs:m},e.id))})})}let d=(0,i.memo)(function(e){let{group:t,isJoined:r,handleJoin:i,handleImageError:n,avatarSrcs:l}=e;return(0,o.jsxs)("div",{style:c.card,children:[(0,o.jsxs)("div",{style:c.cardHeader,children:[(0,o.jsx)("h3",{style:c.cardTitle,children:t.name}),(0,o.jsxs)("div",{style:c.memberCount,children:[(0,o.jsx)(a.YXz,{style:{marginRight:"5px"}}),t.members.length," ",1===t.members.length?"Member":"Members"]})]}),(0,o.jsxs)("div",{style:c.avatars,children:[t.members.slice(0,5).map((e,r)=>(0,o.jsx)(s.default,{src:l[t.id]||e.user_image||"https://via.placeholder.com/40",alt:"".concat(e.name,"'s avatar"),width:40,height:40,style:c.avatar,onError:()=>n(t.id)},r)),t.members.length>5&&(0,o.jsxs)("span",{style:c.moreMembers,children:["+",t.members.length-5]})]}),(0,o.jsx)("p",{style:c.description,children:t.description}),r(t.id)?(0,o.jsx)("button",{style:{...c.joinButton,...c.joinedButton},disabled:!0,children:"Joined"}):(0,o.jsx)("button",{style:c.joinButton,onClick:()=>i(t.id),children:"Join"})]})}),c={container:{padding:"40px 20px",maxWidth:"1200px",margin:"auto",fontFamily:"'Roboto', sans-serif"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px"},card:{backgroundColor:"#CCCCFF",borderRadius:"15px",padding:"25px",boxShadow:"0 10px 20px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"transform 0.3s, box-shadow 0.3s"},cardHeader:{marginBottom:"15px"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",color:"#4B4B4B",margin:"0 0 10px 0"},memberCount:{display:"flex",alignItems:"center",fontSize:"0.9rem",color:"#777"},avatars:{display:"flex",alignItems:"center",marginBottom:"15px",position:"relative"},avatar:{borderRadius:"50%",objectFit:"cover",marginRight:"-10px",border:"2px solid #fff",boxShadow:"0 0 0 1px rgba(0,0,0,0.1)",cursor:"pointer",transition:"transform 0.3s, box-shadow 0.3s"},moreMembers:{fontSize:"0.9rem",color:"#555",marginLeft:"10px"},description:{fontSize:"1rem",color:"#555",marginBottom:"20px",flexGrow:1},joinButton:{padding:"10px 20px",backgroundColor:"#6A5ACD",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem",transition:"background-color 0.3s, transform 0.3s"},joinedButton:{backgroundColor:"#32CD32",cursor:"not-allowed"},errorMsg:{color:"red",textAlign:"center",marginTop:"50px",fontSize:"1.2rem"}}},5370:(e,t,r)=>{"use strict";r.d(t,{Kr:()=>s,QY:()=>d,U7:()=>a,eO:()=>i,kK:()=>l,pl:()=>n});let o=r(2651).A.create({baseURL:"http://127.0.0.1:5000/api",withCredentials:!0}),i=()=>o.get("/profile"),n=()=>o.get("/groups/discover"),a=e=>o.post("/groups/".concat(e,"/join")),s=e=>o.post("/groups/".concat(e,"/complete")),l=e=>o.get("/groups/".concat(e,"/leaderboard")),d=e=>o.get("/groups/".concat(e,"/activity"))}},e=>{var t=t=>e(e.s=t);e.O(0,[711,651,303,441,517,358],()=>t(8040)),_N_E=e.O()}]);