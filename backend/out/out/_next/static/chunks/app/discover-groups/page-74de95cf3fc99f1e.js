(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{1721:(e,t,r)=>{Promise.resolve().then(r.bind(r,1652))},1652:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var o=r(5155);r(2115);var i=r(3034);function a(){return(0,o.jsx)(i.A,{})}},3034:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var o=r(5155),i=r(8803),a=r.n(i),s=r(2115),n=r(5370),l=r(1536);function d(){let[,e]=(0,s.useState)(null),[t,r]=(0,s.useState)([]),[i,l]=(0,s.useState)(new Set),[d,x]=(0,s.useState)(""),[g,u]=(0,s.useState)({}),[h,y]=(0,s.useState)(!0),b=(0,s.useCallback)(e=>i.has(e),[i]);(0,s.useEffect)(()=>{(async()=>{try{var t;y(!0);let o=await fetch("/api/profile",{credentials:"include"});if(!o.ok)throw Error("Failed to fetch user profile.");let i=await o.json();e(i.user);let a=(await (0,n.pl)()).data.groups;if(r(a),null===(t=i.user)||void 0===t?void 0:t.email){let e=a.filter(e=>e.members.some(e=>e.email===i.user.email)).map(e=>e.id);l(new Set(e))}y(!1)}catch(e){console.error("Error fetching data:",e),e instanceof Error?x(e.message||"Failed to fetch data."):x("Failed to fetch data."),y(!1)}})()},[]);let f=(0,s.useCallback)(async e=>{try{await (0,n.U7)(e),l(t=>new Set(t).add(e))}catch(e){console.error("Error joining group:",e),x("Failed to join the group. Please try again later.")}},[]),k=(0,s.useCallback)(e=>{u(t=>({...t,[e]:"https://via.placeholder.com/40"}))},[]);return d?(0,o.jsx)("div",{style:m.errorMsg,children:(0,o.jsxs)("p",{children:["Error: ",d]})}):h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a(),{id:"59757a9a75657e2a",children:"@-webkit-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-moz-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-o-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}"}),(0,o.jsxs)("div",{style:m.container,className:"jsx-59757a9a75657e2a",children:[(0,o.jsx)("div",{style:m.loadingText,className:"jsx-59757a9a75657e2a",children:"Loading..."}),(0,o.jsx)("div",{style:m.grid,className:"jsx-59757a9a75657e2a",children:[...Array(6)].map((e,t)=>(0,o.jsx)(p,{},t))})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a(),{id:"11a770e3a6c80e13",children:"@-webkit-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-moz-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@-o-keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}@keyframes blink{0%{opacity:1}50%{opacity:.5}100%{opacity:1}}"}),(0,o.jsx)("div",{style:m.container,className:"jsx-11a770e3a6c80e13",children:(0,o.jsx)("div",{style:m.grid,className:"jsx-11a770e3a6c80e13",children:t.map(e=>(0,o.jsx)(c,{group:e,isJoined:b,handleJoin:f,handleImageError:k,avatarSrcs:g},e.id))})})]})}let c=(0,s.memo)(function(e){let{group:t,isJoined:r,handleJoin:i,handleImageError:a,avatarSrcs:s}=e;return(0,o.jsxs)("div",{style:m.card,children:[(0,o.jsxs)("div",{style:m.cardHeader,children:[(0,o.jsx)("h3",{style:m.cardTitle,children:t.name}),(0,o.jsxs)("div",{style:m.memberCount,children:[(0,o.jsx)(l.YXz,{style:{marginRight:"5px"}}),t.members.length," ",1===t.members.length?"Member":"Members"]})]}),(0,o.jsxs)("div",{style:m.avatars,children:[t.members.slice(0,5).map((e,r)=>(0,o.jsx)("img",{src:s[t.id]||e.user_image||"https://via.placeholder.com/40",alt:"".concat(e.name,"'s avatar"),width:40,height:40,style:m.avatar,onError:()=>a(t.id)},r)),t.members.length>5&&(0,o.jsxs)("span",{style:m.moreMembers,children:["+",t.members.length-5]})]}),(0,o.jsx)("p",{style:m.description,children:t.description}),r(t.id)?(0,o.jsx)("button",{style:{...m.joinButton,...m.joinedButton},disabled:!0,children:"Joined"}):(0,o.jsx)("button",{style:m.joinButton,onClick:()=>i(t.id),children:"Join"})]})});function p(){return(0,o.jsxs)("div",{style:m.skeletonCard,children:[(0,o.jsxs)("div",{style:m.skeletonHeader,children:[(0,o.jsx)("div",{style:m.skeletonTitle}),(0,o.jsx)("div",{style:m.skeletonSubtitle})]}),(0,o.jsxs)("div",{style:m.skeletonAvatars,children:[(0,o.jsx)("div",{style:m.skeletonAvatar}),(0,o.jsx)("div",{style:m.skeletonAvatar}),(0,o.jsx)("div",{style:m.skeletonAvatar})]}),(0,o.jsx)("div",{style:m.skeletonDescription}),(0,o.jsx)("div",{style:m.skeletonButton})]})}let m={container:{padding:"40px 20px",maxWidth:"1200px",margin:"auto",fontFamily:"'Roboto', sans-serif"},loadingText:{textAlign:"center",marginBottom:"1rem",fontSize:"1.2rem",fontStyle:"italic",color:"#444"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"30px"},card:{backgroundColor:"#CCCCFF",borderRadius:"15px",padding:"25px",boxShadow:"0 10px 20px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",justifyContent:"space-between",transition:"transform 0.3s, box-shadow 0.3s",minHeight:"200px"},cardHeader:{marginBottom:"15px"},cardTitle:{fontSize:"1.5rem",fontWeight:"bold",color:"#4B4B4B",margin:"0 0 10px 0"},memberCount:{display:"flex",alignItems:"center",fontSize:"0.9rem",color:"#777"},avatars:{display:"flex",alignItems:"center",marginBottom:"15px",position:"relative"},avatar:{borderRadius:"50%",objectFit:"cover",marginRight:"-10px",border:"2px solid #fff",boxShadow:"0 0 0 1px rgba(0,0,0,0.1)",cursor:"pointer",transition:"transform 0.3s, box-shadow 0.3s"},moreMembers:{fontSize:"0.9rem",color:"#555",marginLeft:"10px"},description:{fontSize:"1rem",color:"#555",marginBottom:"20px",flexGrow:1},joinButton:{padding:"10px 20px",backgroundColor:"#6A5ACD",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem",transition:"background-color 0.3s, transform 0.3s"},joinedButton:{backgroundColor:"#32CD32",cursor:"not-allowed"},errorMsg:{color:"red",textAlign:"center",marginTop:"50px",fontSize:"1.2rem"},skeletonCard:{backgroundColor:"#eee",overflow:"hidden",position:"relative",animation:"blink 1s ease-in-out infinite",borderRadius:"15px",padding:"25px",minHeight:"200px",boxShadow:"0 10px 20px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column",justifyContent:"space-between"},skeletonHeader:{marginBottom:"15px"},skeletonTitle:{width:"60%",height:"20px",backgroundColor:"#ddd",borderRadius:"4px",marginBottom:"10px"},skeletonSubtitle:{width:"40%",height:"15px",backgroundColor:"#ddd",borderRadius:"4px"},skeletonAvatars:{display:"flex",marginBottom:"15px"},skeletonAvatar:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#ddd",marginRight:"-10px",border:"2px solid #fff"},skeletonDescription:{width:"100%",height:"40px",backgroundColor:"#ddd",borderRadius:"4px",marginBottom:"20px",flexGrow:1},skeletonButton:{width:"30%",height:"35px",backgroundColor:"#ddd",borderRadius:"8px"}}},5370:(e,t,r)=>{"use strict";r.d(t,{Kr:()=>n,QY:()=>d,U7:()=>s,eO:()=>i,kK:()=>l,pl:()=>a,rl:()=>c});let o=r(2651).A.create({baseURL:"http://127.0.0.1:5000/api",withCredentials:!0}),i=()=>o.get("/profile"),a=()=>o.get("/groups/discover"),s=e=>o.post("/groups/".concat(e,"/join")),n=e=>o.post("/groups/".concat(e,"/complete")),l=e=>o.get("/groups/".concat(e,"/leaderboard")),d=e=>o.get("/groups/".concat(e,"/activity")),c=e=>o.get("/groups/".concat(e,"/check-habit"))}},e=>{var t=t=>e(e.s=t);e.O(0,[711,651,69,441,517,358],()=>t(1721)),_N_E=e.O()}]);